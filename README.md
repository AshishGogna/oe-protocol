# Open Elect
Digital, Decentalized and Distributed Electoral Voting System, based on Blockchain technology.
This repository is an implementaion of an Open Elect Node.

Prototype: http://faiyah.com:3000/, Demo: https://youtu.be/kgxaAlAYIco

## Build & Run
To build this, and run this implementation of Open Elect node on your computing device, follow these steps:
1. Clone the repo `$ git clone https://github.com/AshishGogna/oe-protocol`
2. Go to the directory `$ cd oe-protocol`
3. Build the JAR `$ mvn clean package`
4. Set the node's endpoint in `config` file. By default, it is http://localhost:9000
This endpoint is shared with other nodes in the network. It tells them where to reach your node at.
The endpoint will be `"http://[device-ip or domain]:9000"`
5. Run the JAR `$ java -jar target/OpenElectionsNode.jar server service-config.yml`

## Protocol
The Open Elect protocol relies on:
1. Nodes.
2. Blockchain.
3. Proof of Authority Consensus.

#### 1. Nodes
Nodes are Interconnected computing devices which run the open elect protocol.
Each node keeps one copy of the Blockchain and regularly sync it with the network to always maintain latest copy of the blockchain.
In the Open Elect system, there are two types of nodes: Basic nodes and Authority nodes. Both types of nodes run the same protocol. The only advantage authority nodes have is that authority nodes have the authority to generate new block. This authority is provided by the Election Commission in the form of a digital certificate.

The protocol maintains a list of nodes which are part of the network in the `registry/nodes` file.
Each node in the network their list of nodes with each other.

Each node also has a list of public keys of all the authority nodes in the network. It is stored in `registry/auths` file.
When a new block is shared with a node, it accepts it only after verifying the digital signature of that block using the public keys available in this list. If none of the public keys are able to verify the digital signature, the block is not accepte.

One more list of public keys is maintained by the nodes which is the list of public keys of the light weight clients, which the voters use as an interface to caste their votes. It is stored in `registry/lwcs`.
When an authority node receives a new vote submission, it verifies the digital signature of the request using the list of public keys of all lightweight clients in the network, If none of the are able to verify the signature, the vote is not accepted.

#### 2. Blockchain
A Decentralized and Distributed Blockchain is the store of data for the Open Elect System.
Decentralized and Distributed blockchain aensures that the blockchain stays available at not one, but many virtual places. And the protocol ensures that the blockchain remains correct and trustable.

The directory `data/blocks/` contains the blocks of the blockchain.
Each block has the following data:
1. Votes = List of votes.
2. Timestamp = EPOCH time in milliseconds.
3. Merkle Root = A hash of the diginks of all votes.
4. Previous Hash = Hash of the previous block. This chains together all the blocks.
5. Signature = A. digital signature of the block created by the authority node which generated the block, using it's private key.  
6. Hash = Hash of the block.
SHA256 is used as the hashing algorithm.
DSA is used as the signature algorith.

A vote has the following data:
1. Election Id = Publicly announce by the EC.
2. Constituency Id = Publicly announce by the EC.
3. Candidate Id = Publicly announce by the EC.
4. Digink = A hash of Election Id and Voter Id combined. Voter id is not part of the vote to maintain voter's privacy. Digink still ensures that a voter can cast vote only once in an election id.

The file `data/sum` contains the summary of the blockchain:
1. Last Block = Hash of the most recent block added to the blockchain.
2. Blocks = Total blocks in the blockchain.

#### 3. Proof of Authority
Because the blockchain is decentralized and distributed, there is no single source of truth for it. Only an agreement on the source of truth from the network can be considered trustable. Thus, to get to this agreement, Open Elect relies on a very simple, straight forward and completely computationally inexpensive algorithm called Proof of Authority. In this, the word of the authority is considered trustable. To establish a node as an auuthority node, Election Commission issues that node a digital certificate, which contains:
1. EC's public
2. EC's digital signature
3. Node's public key generated by the EC.
4. Node's encrypted private key generated by the EC. The key to decrypt is known to only EC and the Node.
5. Other details like expiry date.

The blockchain validation process is as follows:
1. Verify previous hash and hash by calculating them again.
2. Validate the signature.
3. Validate Merkle root.
4. Validate diginks.
If any one of these validations fail for any block, then the blockchain is considered incorrect and latest version of it is fetched from an authority node. The newly fetched blockchain is validated with the same process and if it fails, this process is continued until a valid version of blockchain is synced from an authority node.
